// Generated by CoffeeScript 1.10.0
(function() {
  var delay, fake_data, json_rest_client, post, post_test_data, repeatedly, request;

  request = require('request-json');

  fake_data = require('./fake-data.js');

  delay = function(t, cb) {
    return setTimeout(cb, t);
  };

  repeatedly = function(t, cb) {
    return setInterval(cb, t);
  };

  json_rest_client = request.createClient('http://indra.webfactional.com');

  post = function(d) {
    return json_rest_client.post('/', d, function(err, res, body) {
      if (err) {
        return console.log(err);
      }
    });
  };

  post_test_data = function(i, d) {
    return delay(1000 * i - 1, function() {
      post(d);
      return console.log('posted', i);
    });
  };

  repeatedly(1000 * fake_data.length, function() {
    var data, i, j, len, results;
    results = [];
    for (i = j = 0, len = fake_data.length; j < len; i = ++j) {
      data = fake_data[i];
      results.push(post_test_data(i + 1, data));
    }
    return results;
  });

}).call(this);
